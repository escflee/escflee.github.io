# 运算方法和运算器

# 数据的表示方法

## 移位运算

- 逻辑移位（无符号数）：左移时，高位移出，低位补0。右移时，低位移出，高位补0
- 算术移位（有符号数移位）：
  - 左移时，高位移出，低位补0（负数反码补1）
  - 右移时，原码：符号位固定不变，右移空出的数值位补0。补码和反码：符号位固定不变，右移空出的数值位补符号位

# 加减运算

## 溢出检测

- 双符号位：前缀00表示正，11表示负。计算结果中两个符号位为01或10时表示溢出。最高符号位表示结果的正确符号
- 单符号位（实际采用）：溢出的逻辑表达式为$V=C_f⊕C_0$。$C_f$为符号位产生的进位，$C_0$为最高有效位产生的进位

## 1位全加器FA

记输入为$A_i,B_i$和低位进位$C_i$。输出为当前位结果$S_i$和向高位的进位$C_{i+1}$。则结果为：
$S_i=A_i⊕B_i⊕C_i$
$C_{i+1}=A_iB_i＋(A_i⊕B_i)C_i$

## 先行进位

令$G_i=A_iB_i$为进位产生函数（本地进位，为1时直接进位不用考虑$C_i$），$P_i=A_i⊕B_i$为进位传递函数（进位条件，为1时若$C_i$也为1时进位）
于是，$C_{i+1}=G_i+P_iC_i$

由此可以推导出超前进位的表达式：
$C_{i+1}=G_i+P_iC_i=G_i+P_i(G_{i-1}+P_{i-1}C_{i-1})$
$C_1=G_0+P_0C_0$
$C_2=G_1+P_1C_1=G_1+P_1G_0+P_1P_0C_0$
$C_3=G_2+P_2G_1+P_2P_1G_0+P_2P_1P_0C_0$
...